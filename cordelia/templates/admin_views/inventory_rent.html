{% extends "admin_views/dashboard.html" %}

  {% block inventory_table_head %}
  
          {% endblock %}


  {% block inventory_table_body %}
          
          <tbody>
          {% for rent in inventory.items %}
            <tr>
              <td colspan="2">
                <div class="accordion" id="accordion{{ loop.index }}">
                  <div class="card bg-dark">
                    <div class="card-header" id="heading{{ loop.index }}">
                      <h6 class="mb-0">
                        <div class="row align-items-center">
                          <!-- First column, left part of the card -->
                          <div class="col-md-3">
                            <div class="d-flex justify-content-start">
                              <button class="btn btn-sm" type="button" data-toggle="collapse" data-target="#collapse{{ loop.index }}" aria-expanded="true" aria-controls="collapse{{ loop.index }}">
                                <span class="arrow-down"></span>
                              </button>
                              {% if rent.is_returned() %}
                              <div class="text-arrow-container">
                                <span class="text-left text-light typewriter-button" style="font-size: 13px;">
                                  {{ rent.rentDate.strftime('%d - %B - %Y') }}
                                </span>
                              </div>
                              {% else %}
                              <div class="text-arrow-container">
                                <span class="neon-text green typewriter-button" style="font-size: 13px;">
                                  {{ rent.rentDate.strftime('%d - %B - %Y') }}
                                </span>
                              </div>
                              {% endif %}
                            </div>
                          </div>
                          
                          <!-- Second column, middle part of the card -->
                          {% if rent.is_returned() %}
                            <div class="col-md-2">
                              <div class="d-flex justify-content-start">
                                <span class="text-left text-light typewriter-button" style="font-size: 12px;">{{ rent }}</span>
                              </div>
                            </div>
                            <div class="col-md-2">
                              <div class="d-flex justify-content-start">
                                <div class="text-arrow-container">
                                  <span class="text-left text-light typewriter-button" style="font-size: 12px;">{{ rent.dress }}</span>
                                </div>
                              </div>
                            </div>
                            <div class="col-md-3">
                              <div class="d-flex justify-content-start">
                                <div class="text-arrow-container">
                                  <span class="text-left text-light typewriter-button" style="font-size: 12px;">{{ rent.customer.lastName }} {{ rent.customer.name }}</span>
                                </div>
                              </div>
                            </div>
                          {% else %}
                            <div class="col-md-2">
                              <div class="d-flex justify-content-start">
                                <span class="neon-text clean-two typewriter-button" style="font-size: 12.5px;">{{ rent }}</span>
                              </div>
                            </div>
                            <div class="col-md-2">
                              <div class="d-flex justify-content-start">
                                <div class="text-arrow-container">
                                  <span class="neon-text green typewriter-button" style="font-size: 12.5px;">{{ rent.dress }}</span>
                                </div>
                              </div>
                            </div>
                            <div class="col-md-3">
                              <div class="d-flex justify-content-start">
                                <div class="text-arrow-container">
                                  <span class="neon-text green typewriter-button" style="font-size: 12.5px;">{{ rent.customer.lastName }} {{ rent.customer.name }}</span>                              </div>
                              </div>
                            </div>
                          {% endif %}                        
                          
                          <!-- Third column, sellable badge -->
                          <div class="col-md-1 d-flex justify-content-center">
                            {% if rent.is_returned() %}
                              <span class="neon-text sand typewriter-button" style="font-size: 12px;">inactive</span>
                            {% else %}
                              <span class="neon-text clean-two typewriter-button" style="font-size: 12px;">active</span>
                            {% endif %}
                          </div>
                        
                          <!-- Fifth column, delete button -->
                          <div class="col-md-1 d-flex justify-content-end">
                            {% if rent.is_returned() %}
                            <form method="POST" action="{{ url_for('admin.delete_object', dataBase='Rent', id=rent.id) }}" class="form-inline" onsubmit="return confirm('Are you sure you want to delete this rent? This action cannot be undone.');">
                              {{ delete_form.hidden_tag() }}
                              <input type="hidden" name="dataBase" value="Dress">
                              <input type="hidden" name="id" value="{{ rent.id }}">
                              <!-- Use the Bootstrap close button here -->
                              <button type="submit" class="btn btn-dark btn-sm btn-smaller text-light" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                              </button>
                            </form>
                            {% else %}
                            <form method="POST" action="{{ url_for('admin.delete_object', dataBase='Rent', id=rent.id) }}" class="form-inline" onsubmit="return false;">
                              {{ delete_form.hidden_tag() }}
                              <input type="hidden" name="dataBase" value="Rent">
                              <input type="hidden" name="id" value="{{ rent.id }}">
                              <!-- Use the Bootstrap close button here -->
                              <button type="submit" class="btn btn-dark btn-sm btn-smaller text-light" aria-label="Close" disabled>
                                <span aria-hidden="true">&times;</span>
                              </button>
                            </form>
                            {% endif %}
                          </div>                        
                        </div>
                      </h6>
                    </div>
                  </div>
                </div>

                <div>
                  <div id="collapse{{ loop.index }}" class="collapse" aria-labelledby="heading{{ loop.index }}" data-parent="#accordion{{ loop.index }}">
                    <div class="card-body">
                      <table class="table table-striped table-hover table-sm table-dark" style="font-family: 'Courier New', Courier, monospace;">
                        <tbody style="font-size: 12px;">
                          <tr>
                            <td class="d-flex" style="padding-left: 10px;">
                              <!-- Main table column -->
                              <div class="col-4">
                                <!-- Inner table with the content of the rows -->
                                <table class="w-100" style="font-family: 'Courier New', Courier, monospace;">
                                  <thead style="font-size: 13px;">
                                    <tr>
                                      <th scope="row">{{ rent }}</th>
                                      <td></td>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    <tr>
                                      <th scope="row">Rent Date:</th>
                                      <td>{{ rent.rentDate }}</td>
                                    </tr>
                                    <tr>
                                      <th scope="row">Return Date:</th>
                                      <td>{{ rent.returnDate }}</td>
                                    </tr>
                                    <tr>
                                      <th scope="row">Rent Total:</th>
                                      <td>{{ rent.paymentTotal }}</td>
                                    </tr>
                                  </tbody>
                                  <tfoot class="custom-footer">
                                    <tr>
                                      <td colspan="2">
                                      </td>
                                    </tr>
                                  </tfoot>
                                </table>
                              </div>
                              <!-- Maintenance log column -->
                              <div class="col-8">
                                <table class="table table-striped table-hover table-sm table-dark" style="font-family: 'Courier New', Courier, monospace;">
                                  {% if rent.rentLog %}
                                  <thead style="font-size: 13px;">
                                    <tr>
                                      <th>Dress</th>
                                    </tr>
                                  </thead>
                                  <tbody style="font-size: 12px;">
                                    {% for log in rent.get_rent_log() %}
                                    <tr>
                                      <td>
                                        D-0{{ log.dress_data['id'] }} |
                                        {{ log.dress_data['brand'] }} |
                                        {{ log.dress_data['style'] }} |
                                        Size: {{ log.dress_data['size'] }} |
                                        {{ log.dress_data['color'] }} |
                                        Rent price: {{ log.dress_data['rent_price'] }}
                                      </td>
                                    </tr>
                                    {% endfor %}
                                  </tbody>
                                  {% endif %}
                                </table>
                                <table class="table table-striped table-hover table-sm table-dark" style="font-family: 'Courier New', Courier, monospace;">
                                  {% if rent.rentLog %}
                                  <thead style="font-size: 13px;">
                                    <tr>
                                      <th>Customer</th>
                                    </tr>
                                  </thead>
                                  <tbody style="font-size: 12px;">
                                    {% for log in rent.get_rent_log() %}
                                    <tr>
                                      <td>
                                      C-0{{ log.customer_data['id'] }} |
                                      {{ log.customer_data['last_name'] }}
                                      {{ log.customer_data['name'] }}
                                      </td>
                                    </tr>
                                    {% endfor %}
                                  </tbody>
                                  {% endif %}
                                </table>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>                                                           
                    </div>
                  </div>
                </div>
              </td>
            </tr>
          {% endfor %}
          </tbody>
          <tfoot class="custom-footer">
            <tr>
              <td colspan="2">
              </td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
  </div>

{% endblock %}